#!/usr/bin/env bash

case "$1" in
user)
  shift 1
  if [ -z "$FNM_MULTISHELL_PATH" ]; then
    TMP_BIN_PATH="${1:-$TMP_BIN_PATH}"
    USRBINDIR="${2:-$USRBINDIR}"
    SET_USR_PATH="$(echo "$TMP_BIN_PATH" | tr ':' '\n' | grep -Fv '..' | grep "$HOME" | grep -vE "^\.|$USRBINDIR" | sed 's|:.$||g' | grep -v '^$' | tr '\n' ':' | sed 's|:$||g')"
    PATH="$SET_USR_PATH:$USRBINDIR:$SYSBINDIR:."
  else
    TMP_BIN_PATH="${1:-$TMP_BIN_PATH}"
    USRBINDIR="${2:-$USRBINDIR}"
    FNM_MULTISHELL_PATH="${3:-$FNM_MULTISHELL_PATH}"
    SET_USR_PATH="$(echo "$TMP_BIN_PATH" | tr ':' '\n' | grep -Fv '..' | grep "$HOME" | grep -vE "^\.|$USRBINDIR|$FNM_MULTISHELL_PATH" | sed 's|:.$||g' | grep -v '^$' | tr '\n' ':' | sed 's|:$||g')"
    PATH="$FNM_MULTISHELL_PATH/bin:$SET_USR_PATH:$USRBINDIR:$SYSBINDIR:."
  fi
  ;;
system)
  shift 1
  PATH="/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/bin:/sbin:/usr/share/games:/usr/games"
  ;;
esac

echo "set -gx PATH $PATH"
